---

- name: Pull otcetera repo
  git:
    repo: "{{ otcetera_git_remote }}"
    dest: "{{ synth_dir }}/otcetera"
    version: "{{ otcetera_synth_branch }}"

- name: write reconf.sh script
  template:
    src: templates/dot_opentree.j2
    dest: "{{ synth_dir }}/buildotc/reconf.sh"

- name: Create the Makefiles by running our invocation of configure (via reconf.sh)
  command: bash reconf.sh
  args:
    chdir: "{{synth_dir}}/buildotc"
    creates: "{{synth_dir}}/buildotc/Makefile"
